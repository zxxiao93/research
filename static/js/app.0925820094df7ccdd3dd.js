webpackJsonp([13],{124:function(t,e){},125:function(t,e){},127:function(t,e,n){n(125);var r=n(28)(n(80),n(129),null,null);t.exports=r.exports},128:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}},129:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("Row",{attrs:{type:"flex"}},[n("i-col",{staticClass:"layout-menu-left",attrs:{span:5}},[n("Menu",{attrs:{"active-name":t.defaultActive,theme:"dark",width:"auto"}},[n("div",{staticClass:"layout-logo-left"},[t._v("微型问卷系统")]),t._v(" "),t._l(t.navList,function(e,r){return n("router-link",{key:r,attrs:{to:e.to}},[n("Menu-item",{attrs:{name:e.name}},[n("Icon",{attrs:{type:e.icon}}),t._v(" "),n("span",{staticClass:"layout-text"},[t._v(t._s(e.text))])],1)],1)})],2)],1),t._v(" "),n("i-col",{staticClass:"layout-content-right",attrs:{span:19}},[n("div",{staticClass:"layout-header"},["/platform/statis"===this.$route.matched[1].path?n("div",{staticClass:"header-nav"},[n("Menu",{attrs:{mode:"horizontal",theme:"light","active-name":t.subActive},on:{"on-select":t.selectMenu}},[n("Menu-item",{attrs:{name:"结果统计"}},[n("Icon",{attrs:{type:"pie-graph"}}),t._v("\n              结果统计\n            ")],1),t._v(" "),n("Menu-item",{attrs:{name:"样本数据"}},[n("Icon",{attrs:{type:"document-text"}}),t._v("\n              样本数据\n            ")],1),t._v(" "),n("Menu-item",{attrs:{name:"交叉分析"}},[n("Icon",{attrs:{type:"shuffle"}}),t._v("\n              交叉分析\n            ")],1)],1)],1):t._e(),t._v(" "),n("a",{staticClass:"header-logout",on:{click:t.logout}},[t._v("注销 "+t._s(t.userName))])]),t._v(" "),n("div",{staticClass:"layout-content"},[n("div",{staticClass:"layout-content-main"},[n("router-view")],1)]),t._v(" "),n("div",{staticClass:"layout-copy"},[t._v("\n        2009-2016 © Timuwork\n      ")])])],1)],1)},staticRenderFns:[]}},34:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return u}),n.d(e,"f",function(){return c}),n.d(e,"g",function(){return s}),n.d(e,"i",function(){return l}),n.d(e,"j",function(){return f}),n.d(e,"k",function(){return m}),n.d(e,"h",function(){return d}),n.d(e,"l",function(){return p}),n.d(e,"m",function(){return h});var r="REQUEST_QUESTION_LIST",i="CREATE_NEW_NAIRE",a="SAVE_NEW_NAIRE",o="ADD_NEW_QUESTION",u="DEL_QUESTION",c="DEL_OPTION",s="CHANGE_STATUS",l="UPDATE_TITLE",f="UPDATE_INTRO",m="UPDATE_DEADLINE",d="CHANGE_NAIRE_STATUS",p="USER_LOGIN",h="LOG_OUT"},50:function(t,e,n){"use strict";var r=n(11),i=n(130),a=n.n(i),o=n(127),u=n.n(o),c=function(){return n.e(2).then(n.bind(null,141))},s=function(){return n.e(1).then(n.bind(null,140))},l=function(){return n.e(4).then(n.bind(null,139))},f=function(){return n.e(3).then(n.bind(null,147))},m=function(){return n.e(7).then(n.bind(null,146))},d=function(){return n.e(11).then(n.bind(null,136))},p=function(){return n.e(8).then(n.bind(null,145))},h=function(){return n.e(0).then(n.bind(null,143))},v=function(){return n.e(6).then(n.bind(null,142))},_=function(){return n.e(5).then(n.bind(null,144))},E=function(){return n.e(9).then(n.bind(null,138))},g=function(){return n.e(10).then(n.bind(null,137))};r.default.use(a.a);var A=new a.a({routes:[{path:"/",name:"index",redirect:"/platform"},{path:"/login",name:"Login",component:c},{path:"/complete",name:"complete",component:g},{path:"/view/:id",name:"View",component:f},{path:"/platform",name:"Platform Layout",component:u.a,redirect:"/platform/list",children:[{path:"list",name:"Naire List",component:s,meta:{requiresAuth:!0}},{path:"edit",name:"Edit Question",component:l,meta:{requiresAuth:!0}},{path:"edit/:id",name:"Edit Detail",component:l,meta:{requiresAuth:!0}},{path:"user",component:m,meta:{requiresAuth:!0}},{path:"admin",component:d,meta:{requiresAuth:!0}},{path:"statis",name:"Static",component:p,children:[{path:"result/:id",name:"结果统计",component:h,meta:{requiresAuth:!0}},{path:"source/:id",name:"样本数据",component:_,meta:{requiresAuth:!0}},{path:"cross-analysis/:id",name:"交叉分析",component:v,meta:{requiresAuth:!0}}]}]},{path:"/404",name:"404页面",component:E},{path:"*",name:"未找到页面",redirect:"/404"}]});A.beforeEach(function(t,e,n){t.meta.requiresAuth?localStorage.getItem("JWT_TOKEN")?n():n({path:"/login",query:{redirect:t.fullPath}}):n()}),e.a=A},51:function(t,e,n){"use strict";var r=n(11),i=n(132),a=n(76),o=n(77),u=n(78);r.default.use(i.a);e.a=new i.a.Store({state:{naire:{},isAdmin:!1,status:"create"},actions:a,getters:o,mutations:u.a,strict:!1})},53:function(t,e){},55:function(t,e,n){n(124);var r=n(28)(n(79),n(128),null,null);t.exports=r.exports},75:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(27),i=n.n(r),a=n(52),o=n.n(a),u=n(11),c=n(55),s=n.n(c),l=n(50),f=n(51),m=n(26),d=n.n(m),p=n(54),h=n.n(p),v=n(53),_=(n.n(v),this);u.default.use(h.a),d.a.interceptors.request.use(function(t){return localStorage.JWT_TOKEN&&(t.headers.Authorization="token "+localStorage.JWT_TOKEN),t},function(t){return o.a.reject(t)}),d.a.interceptors.response.use(function(t){return t},function(t){if(t.response)switch(t.response.status){case 401:f.a.commit("LOG_OUT"),l.a.replace({path:"/login",query:{redirect:l.a.currentRoute.fullPath}}),_.$Message.error("非法访问，请重试！")}return o.a.reject(t.response.data)}),u.default.prototype.$http=d.a,u.default.config.productionTip=!1,new u.default(i()({el:"#app",router:l.a,store:f.a},s.a)).$mount("#app")},76:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"getNaire",function(){return o}),n.d(e,"createNaire",function(){return u}),n.d(e,"saveNewNaire",function(){return c}),n.d(e,"addQuestion",function(){return s}),n.d(e,"delQuestion",function(){return l}),n.d(e,"delOption",function(){return f}),n.d(e,"changeStatus",function(){return m}),n.d(e,"changeNaireStatus",function(){return d}),n.d(e,"login",function(){return p}),n.d(e,"logout",function(){return h});var r=n(34),i=n(26),a=n.n(i),o=function(t,e){t.commit,t.state;return console.log("commit REQUEST_QUESTION_LIST"),a.a.post("/api/naire/detail",{n_id:e.n_id})},u=function(t,e){var n=t.commit;t.state;n(r.b,{naire:e})},c=function(t,e){var n=(t.commit,t.state);return a.a.post("/api/naire/save",{naire:n.naire,status:n.status})},s=function(t,e){var n=t.commit;t.state;n(r.d,{topic:e})},l=function(t,e){var n=t.commit;t.state;n(r.e,e)},f=function(t,e){var n=t.commit;t.state;n(r.f,e)},m=function(t,e){var n=t.commit;t.state;n(r.g,e)},d=function(t,e){var n=t.commit;t.state;n(r.h,e)},p=function(t,e){(0,t.commit)(r.l,{username:e.username,token:e.token})},h=function(t){(0,t.commit)(r.m)}},77:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"naire",function(){return r}),n.d(e,"status",function(){return i}),n.d(e,"isAdmin",function(){return a}),n.d(e,"getUser",function(){return o}),n.d(e,"getToken",function(){return u});var r=function(t){return t.naire},i=function(t){return t.status},a=function(t){return t.isAdmin},o=function(t){return localStorage.getItem("USER_NAME")},u=function(t){return localStorage.getItem("JWT_TOKEN")}},78:function(t,e,n){"use strict";var r,i=n(83),a=n.n(i),o=n(27),u=n.n(o),c=n(81),s=n.n(c),l=n(34);e.a=(r={},a()(r,l.a,function(t,e){var n=s()(e.naire);t.naire=JSON.parse(n)}),a()(r,l.b,function(t,e){t.naire=u()({},t.naire,e.naire)}),a()(r,l.c,function(t,e){t.naire=u()({},t.naire,e.naire)}),a()(r,l.d,function(t,e){t.naire.topic.push(e.topic)}),a()(r,l.e,function(t,e){t.naire.topic.splice(e,1)}),a()(r,l.f,function(t,e){t.naire.topic[e.index].options.splice(e.opIndex,1)}),a()(r,l.g,function(t,e){t.status=e}),a()(r,l.h,function(t,e){t.naire.status=e}),a()(r,l.i,function(t,e){t.naire=u()({},t.naire,{title:e})}),a()(r,l.j,function(t,e){t.naire=u()({},t.naire,{intro:e})}),a()(r,l.k,function(t,e){t.naire=u()({},t.naire,{deadline:e})}),a()(r,l.l,function(t,e){t.isAdmin=!0,localStorage.setItem("USER_NAME",e.username),localStorage.setItem("JWT_TOKEN",e.token)}),a()(r,l.m,function(t){t.isAdmin=!1,localStorage.removeItem("JWT_TOKEN"),localStorage.removeItem("USER_NAME")}),r)},79:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app"}},80:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{subActive:this.$route.name,navList:[{to:"/platform/list",name:"/platform/list",text:"我的问卷",icon:"ios-paper"},{to:"/platform/edit",name:"/platform/edit",text:"新建问卷",icon:"android-create"},{to:"/platform/user",name:"/platform/user",text:"用户管理",icon:"person"},{to:"/platform/admin",name:"/platform/admin",text:"管理员设置",icon:"ios-analytics"}]}},computed:{defaultActive:function(){return this.$route.matched.length>1?this.$route.matched[1].path:this.$route.path},userName:function(){return this.$store.getters.getUser}},methods:{logout:function(){this.$store.dispatch("logout"),this.$Message.warning("已登出!"),this.$router.push("/login")},selectMenu:function(t){this.subActive=t,this.$router.push({name:t,params:{id:this.$route.params.id}})}}}}},[75]);