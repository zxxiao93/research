webpackJsonp([6],{142:function(t,a,e){e(607);var i=e(28)(e(325),e(628),"data-v-4c31d5c0",null);t.exports=i.exports},170:function(t,a,e){"use strict";e.d(a,"a",function(){return i});var i=function(t){t="number"==typeof t?t:Number(t);var a=new Date(t);return a.getFullYear()+"-"+(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()}},325:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e(56),s=e.n(i),o=e(170);a.default={data:function(){return{hasReady:!1,currentPage:1,total:5,pageSize:10,statisData:{naire:{title:"",intro:"",deadline:0}},columnsStatis:[{title:"X \\ Y",key:"type",ellipsis:!1,width:100},{title:"小计",key:"count",fixed:"right",ellipsis:!1,width:100}],curResult:[],tableDisplay:!1,options:{x_id:"",y_id:"",select:[]}}},filters:{timeFormat:function(t){return e.i(o.a)(t)}},methods:{GetRound:function(t,a){return Math.round(t*Math.pow(10,a))/Math.pow(10,a)},formateData:function(){var t=this,a={};this.statisData.cross_result.forEach(function(t){a[t.y_id+"_"+t.x_id]={count:t.count,value:t.x_value,y_id:t.y_id,x_id:t.x_id}});var e={};this.statisData.row.forEach(function(t){e[t.o_id]={id:t.o_value}});var i=[];this.statisData.row.forEach(function(s){var o={type:e[s.o_id].id},n=0;t.statisData.column.forEach(function(t){var e=a[t.o_id+"_"+s.o_id],i=void 0===e?0:e.count;o["y_"+t.o_id]=i,n+=1*i}),o.count=n,i.push(o)}),i.forEach(function(a){console.log(a);for(var e in a)console.log(e),"type"!==e&&"count"!==e&&(a[e]=a[e]+" ("+(0===a[e]?0:t.GetRound(100*a[e]/a.count,2))+"%)")}),this.curResult=i},createColumn:function(){var t=this;this.columnsStatis=[{title:"X \\ Y",key:"type",ellipsis:!1,width:100},{title:"小计",key:"count",fixed:"right",ellipsis:!1,width:100}];var a={title:"",key:""};this.statisData.column.forEach(function(e,i){a.title=e.o_value,a.key="y_"+e.o_id,t.columnsStatis.push(s()({},a))})},crossAnalysis:function(){var t=this;this.$http.post("/api/naire/crossanalysis",{n_id:this.$route.params.id,x_id:this.options.x_id,y_id:this.options.y_id}).then(function(a){console.log(a.data),0===a.data.err?(t.statisData.cross_result=a.data.data.cross_result,t.statisData.column=a.data.data.column,t.statisData.row=a.data.data.row,t.createColumn(),t.formateData(),t.tableDisplay=!0):t.$Message.error(a.data.data)}).catch(function(a){console.log(a),t.$Message.error("获取数据错误，请重试")})}},beforeCreate:function(){var t=this;this.$http.post("/api/naire/questions",{n_id:this.$route.params.id}).then(function(a){console.log(a.data),0===a.data.err?(t.statisData.naire=a.data.data.naire,t.options.select=a.data.data.questions,t.hasReady=!0):t.$Message.error(a.data.data)}).catch(function(a){console.log(a),t.$Message.error("获取数据错误，请重试")})}}},340:function(t,a,e){a=t.exports=e(133)(!1),a.push([t.i,".demo-spin-icon-load[data-v-4c31d5c0]{animation:ani-demo-spin 1s linear infinite}@keyframes ani-demo-spin{0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}to{transform:rotate(1turn)}}.demo-spin-col[data-v-4c31d5c0]{height:100px;position:relative;border:1px solid #eee}.option-select[data-v-4c31d5c0],.source-data-table[data-v-4c31d5c0]{margin:20px 0}",""])},607:function(t,a,e){var i=e(340);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(134)("022a7b36",i,!0)},628:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.hasReady?t._e():e("Spin",[e("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"load-c",size:"18"}}),t._v(" "),e("div",[t._v("数据加载中...")])],1),t._v(" "),t.hasReady?e("div",{staticClass:"source-data"},[e("h2",[t._v(t._s(t.statisData.naire.title))]),t._v(" "),e("p",[e("Tag",{attrs:{type:"border",color:0===t.statisData.naire.status?"red":"green"}},[t._v("\n                "+t._s(0===t.statisData.naire.status?"未发布":"已发布")+"\n            ")])],1),t._v(" "),e("p",[t._v("创建日期： "+t._s(t._f("timeFormat")(t.statisData.naire.creattime))+" | 截止日期："+t._s(t._f("timeFormat")(t.statisData.naire.deadline)))]),t._v(" "),e("div",{staticClass:"line"}),t._v(" "),e("Row",{staticClass:"option-select"},[e("Col",{attrs:{span:"12"}},[e("h3",[t._v("自变量：")]),t._v(" "),e("p",[t._v("一般为样本数据，例如性别和年龄，目前支持一项。")]),t._v(" "),e("Select",{staticStyle:{width:"100%","padding-right":"20px"},model:{value:t.options.x_id,callback:function(a){t.options.x_id=a},expression:"options.x_id"}},t._l(t.options.select,function(a,i){return e("Option",{key:i,attrs:{value:a.value}},[t._v(t._s(a.label)+"\n                ")])}))],1),t._v(" "),e("Col",{attrs:{span:"12"}},[e("h3",[t._v("因变量：")]),t._v(" "),e("p",[t._v("您要分析的目标题目，目前支持一项。")]),t._v(" "),e("Select",{staticStyle:{width:"100%","padding-right":"20px"},model:{value:t.options.y_id,callback:function(a){t.options.y_id=a},expression:"options.y_id"}},t._l(t.options.select,function(a,i){return e("Option",{key:i,attrs:{value:a.value}},[t._v(t._s(a.label)+"\n                ")])}))],1)],1),t._v(" "),e("div",{staticClass:"btn"},[e("Button",{attrs:{type:"primary",icon:"ios-shuffle"},on:{click:t.crossAnalysis}},[t._v("交叉分析")])],1),t._v(" "),e("div",{staticClass:"source-data-table"},[e("Table",{directives:[{name:"show",rawName:"v-show",value:t.tableDisplay,expression:"tableDisplay"}],attrs:{size:"small",stripe:!0,columns:t.columnsStatis,data:t.curResult}})],1)],1):t._e()],1)},staticRenderFns:[]}}});